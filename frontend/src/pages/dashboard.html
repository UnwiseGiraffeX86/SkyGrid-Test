<!DOCTYPE html>
<html lang="en">
  <head>
      <script src="https://kit.fontawesome.com/5c5538a4fa.js" crossorigin="anonymous"></script>
      <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAAFn9p-ADjyEytWFPmEW1zAll09zSSusg&callback=initMap&libraries=&v=weekly" async defer></script>

      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <link rel="stylesheet" href="dashboard.css">
      <title>Dashboard Layout</title>
  </head>
<body>

  <div class="container">
    <div class="settingBar">
      
      <button class="button" type="button" title="Profile">
        <i class="fa-solid fa-user"></i>
        <span class="button-label">Profile</span>
      </button>

      <button class="button" type="button" title="Map View">
        <i class="fa-solid fa-map-location-dot"></i>
        <span class="button-label">Map View</span>
      </button>

      <button class="button" type="button" title="Alerts">
        <i class="fa-solid fa-triangle-exclamation"></i>
        <span class="button-label">Alerts</span>
      </button>

      <button class="button" type="button" title="Policies">
        <i class="fa-solid fa-scroll"></i>
        <span class="button-label">Policies</span>
      </button>

      <button class="button" type="button" title="Reports">
        <i class="fa-solid fa-chart-line"></i>
        <span class="button-label">Reports</span>
      </button>

      <button class="button" type="button" title="Settings">
        <i class="fa-solid fa-gear"></i>
        <span class="button-label">Settings</span>
      </button>

      <button class="button" type="button" title="Apps">
                  <i class="fa-solid fa-th"></i>
        <span class="button-label">Apps</span>
      </button>

    </div>
    
    <div class="cardContainer">
        <div class="card medium">Traffic Alerts
          

        </div>
        <div class="card medium">Congestion Level</div>
        <div class="card medium">Weather Alerts</div>
        <div class="card medium">Energy Consumption
        </div>


        <!-- Harta  -->       
        <div class="card extralarge" id="map">
          
        </div>
        



        <div class="card large">
          <div class="environmental-data">
              <h2>Environmental Data</h2>
              
              <div class="data-card" id="temperature">
                  <i class="fa-solid fa-thermometer-half data-icon"></i>
                  <div class="data-content">
                      <span class="data-label">Temperature:</span>
                      <span class="data-value">Loading...</span>
                  </div>
              </div>
      
              <div class="data-card" id="pressure">
                  <i class="fa-solid fa-gauge-high data-icon"></i>
                  <div class="data-content">
                      <span class="data-label">Pressure:</span>
                      <span class="data-value">Loading...</span>
                  </div>
              </div>
      
              <div class="data-card" id="humidity">
                  <i class="fa-solid fa-droplet data-icon"></i>
                  <div class="data-content">
                      <span class="data-label">Humidity:</span>
                      <span class="data-value">Loading...</span>
                  </div>
              </div>

              <div class="data-card" id="cloudCov">
                <i class="fa-solid fa-cloud data-icon"></i>
                <div class="data-content">
                    <span class="data-label">Cloud Coverage:</span>
                    <span class="data-value">Loading...</span>
                </div>
            </div>
            
            <div class="data-card" id="O3">
                <i class="fa-solid fa-smog data-icon"></i>
                <div class="data-content">
                    <span class="data-label">O₃ (Ozone):</span>
                    <span class="data-value">Loading...</span>
                </div>
            </div>
            
            <div class="data-card" id="NO2">
                <i class="fa-solid fa-wind data-icon"></i>
                <div class="data-content">
                    <span class="data-label">NO₂:</span>
                    <span class="data-value">Loading...</span>
                </div>
            </div>

            <div class="data-card" id="precipitation">
              <i class="fa-solid fa-cloud-rain data-icon"></i>
              <div class="data-content">
                  <span class="data-label">Precipitation Chance:</span>
                  <span class="data-value">Loading...</span>
              </div>
            </div>
          
            <div class="data-card" id="uvIndex">
                <i class="fa-solid fa-sun data-icon"></i>
                <div class="data-content">
                  <span class="data-label">UV Index:</span>
                  <span class="data-value">Loading...</span>
                </div>
            </div>
          
            <div class="data-card" id="windSpeed">
                <i class="fa-solid fa-wind data-icon"></i>
                <div class="data-content">
                  <span class="data-label">Wind Speed:</span>
                  <span class="data-value">Loading...</span>
                </div>
            </div>

            <div class="data-card" id="future1">
              <span class="data-label">In 1 hour:</span> 
              <span class="data-value">Temp 22°C</span>
              <span class="data-value">Pressure</span>
              <span class="data-value">Cloud Coverage</span>
              <span class="data-value">Humidity</span>
            </div>

            <div class="data-card" id="future2">
              <span class="data-label">In 2 hours:</span> 
              <span class="data-value">Temp 22°C</span>
              <span class="data-value">Pressure</span>
              <span class="data-value">Cloud Coverage</span>
              <span class="data-value">Humidity</span>
            </div>

            <div class="data-card" id="future3">
              <span class="data-label">In 3 hours:</span> 
              <span class="data-value">Temp 22°C</span>
              <span class="data-value">Pressure</span>
              <span class="data-value">Cloud Coverage</span>
              <span class="data-value">Humidity</span>
            </div>

            <div class="data-card" id="future4">
              <span class="data-label">In 4 hours:</span> 
              <span class="data-value">Temp 22°C</span>
              <span class="data-value">Pressure</span>
              <span class="data-value">Cloud Coverage</span>
              <span class="data-value">Humidity</span>
            </div>

            <div class="data-card" id="future5">
              <span class="data-label">In 5 hours:</span> 
              <span class="data-value">Temp 22°C</span>
              <span class="data-value">Pressure</span>
              <span class="data-value">Cloud Coverage</span>
              <span class="data-value">Humidity</span>
            </div>

            <div class="data-card" id="future6">
              <span class="data-label">In 6 hours:</span> 
              <span class="data-value">Temp 22°C</span>
              <span class="data-value">Pressure</span>
              <span class="data-value">Cloud Coverage</span>
              <span class="data-value">Humidity</span>
            </div>

          </div>
        </div>
  
      <script>
        function calculateUVIndex(cloudCoverage) {
          const hours = new Date().getHours(); // Get current hour
          const maxUVIndex = 11; // Maximum UV index possible
      
          // Calculate base UV index based on time of day, peaking at noon
          let uvIndex = maxUVIndex * Math.sin(((hours - 4) % 24) / 24 * Math.PI);
      
          // Adjust UV index based on cloud coverage
          uvIndex *= (1 - (cloudCoverage / 100));
      
          return Math.max(0, uvIndex.toFixed(2)); // Ensure UV index doesn't go negative
      }
      
      function generateRandomData() {
          const temperature = (Math.random() * (26 - 24) + 24).toFixed(2) + ' °C';
          const pressure = (Math.random() * (1000 - 990) + 990).toFixed(2) + ' mBar';
          const humidity = (Math.random() * (62 - 55) + 55).toFixed(2) + ' %';
          const cloudCov = (Math.random() * (35 - 31) + 31).toFixed(2) + ' %';
          const O3 = (Math.random() * (20 - 18) + 18).toFixed(2) + ' ppB';
          const NO2 = (Math.random() * (62 - 55) + 55).toFixed(2) + ' ppM';
          const precipitationChance = (Math.random() * (25 - 10) + 10).toFixed(2) + ' %';
          const windSpeed = (Math.random() * (8 - 5) + 5).toFixed(2) + ' km/h';
          const uvIndex = calculateUVIndex(parseFloat(cloudCov)); // Calculate UV index based on cloud coverage
      
          // Update HTML elements with new data
          document.getElementById('temperature').querySelector('.data-value').textContent = temperature;
          document.getElementById('pressure').querySelector('.data-value').textContent = pressure;
          document.getElementById('humidity').querySelector('.data-value').textContent = humidity;
          document.getElementById('cloudCov').querySelector('.data-value').textContent = cloudCov;
          document.getElementById('O3').querySelector('.data-value').textContent = O3;
          document.getElementById('NO2').querySelector('.data-value').textContent = NO2;
          document.getElementById('precipitation').querySelector('.data-value').textContent = precipitationChance;
          document.getElementById('uvIndex').querySelector('.data-value').textContent = uvIndex;
          document.getElementById('windSpeed').querySelector('.data-value').textContent = windSpeed;
      }
      
      // Call generateRandomData to trigger the whole process immediately and on a 30-minute interval
      generateRandomData();
      setInterval(generateRandomData, 180000); // 1800000 milliseconds = 30 minutes
  
    </script>
    
      

      <div class="MHolder">


        <div class="card small">
          <div class="lights">
            <div class="lights-icon"><i class="fa-sharp fa-solid fa-traffic-light"></i></div>
            <div class="lights-info">
              <div class="lights-item total-lights">
                <span class="number">1128</span>
                <span class="label">Total lights</span>
              </div>
              <div class="lights-item functioning-lights">
                <span class="number">986</span>
                <span class="label">Functioning</span>
              </div>
              <div class="lights-item not-functioning-lights">
                <span class="number">142</span>
                <span class="label">Not functioning</span>
              </div>
            </div>
          </div>
        </div>
        
        
        <div class="card small"></div>
      </div>
    </div> 
  </div>
  </div>
  <script src="trafficMap.js"></script>
  </body>
  </html>
